# Technical Foundation: Data Architecture and Operational Rules

The successful implementation and adoption of STARs depend on a robust, transparent, and secure technical foundation within the Granular Registry. This section details the core data structures, integration protocols, operational logic, security measures, and alignment with industry standards that underpin the STAR system.

## Core Data Objects within the Granular Registry

The Granular Registry utilizes a set of interconnected data objects to manage the lifecycle of GCs and STARs, ensuring traceability and auditability. These objects, largely based on the definitions in the Appendix of the draft content and aligned where possible with EnergyTag principles <sup>12</sup>, include:

* **Granular Certificate (GC):** The foundational unit representing 1 MWh (or fraction thereof, e.g., down to Wh) of energy generated in a specific (sub)hourly interval. Key fields include a unique gc\_id, reference to the original EAC (eac\_reference), precise start and end timestamps (start\_ts, end\_ts in UTC), and detailed source attributes (fuel type, generator ID, location, capacity, etc.). GCs are immutable once issued and serve as the input attribute for storage time-shifting.
* **Storage Charge Record (SCR):** Records the event of energy being charged into a registered storage unit. Key fields: scr\_id, storage\_unit\_id, charge interval timestamps (start\_ts, end\_ts), energy input (energy\_in\_wh), and a pointer to the allocated GC(s) whose attributes are being stored (allocated\_gc\_ids). Generated based on verified meter data for the storage unit's import.
* **Storage Discharge Record (SDR):** Records the event of energy being discharged from the storage unit. Key fields: sdr\_id, storage\_unit\_id, discharge interval timestamps (start\_ts, end\_ts), and energy output (energy\_out\_wh). Generated based on verified meter data for the storage unit's export.
* **Storage Time Allocation Record (STAR):** The novel, tradable commodity representing the verified time-shifting service. Key fields: star\_id, linkage to the specific charge and discharge events (scr\_id, sdr\_id), reference to the original GC(s) involved (allocated\_gc\_ids inherited via SCR), and the calculated energy loss (round\_trip\_loss\_wh). Issued by the registry upon successful FIFO matching of an SCR to an SDR.
* **Storage-Discharge Granular Certificate (SD-GC):** The final, non-tradable certificate representing the time-shifted clean energy attribute, issued upon retirement of a paired STAR and original GC. Key fields: Inherits most fields from the original GC (source\_attributes, eac\_reference), but with updated timestamps (start\_ts, end\_ts) reflecting the _discharge_ interval from the SDR. Includes references to the original\_gc\_id and the star\_id for full traceability. May optionally include the calculated carbon impact (delta\_mer\_kgco2e\_mwh).

&#x20;

The relationships can be visualized as:

<figure><img src=".gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

Table 6.1: Granular Registry Data Object Schema Summary

<table data-header-hidden><thead><tr><th valign="top"></th><th valign="top"></th><th valign="top"></th><th valign="top"></th></tr></thead><tbody><tr><td valign="top">Object</td><td valign="top">Key Fields</td><td valign="top">Description/Purpose</td><td valign="top">Notes</td></tr><tr><td valign="top">Granular Certificate (GC)</td><td valign="top">gc_id (UUID), eac_reference (String), start_ts (Timestamp), end_ts (Timestamp), energy_wh (Integer), source_attributes (JSON)</td><td valign="top">Base unit of time-stamped energy attribute. Input for storage.</td><td valign="top">Aligned with EnergyTag GC definition.<sup>12</sup> Immutable once issued. Linked to retired/reserved REC.</td></tr><tr><td valign="top">Storage Charge Record (SCR)</td><td valign="top">scr_id (UUID), storage_unit_id (String), start_ts (Timestamp), end_ts (Timestamp), energy_in_wh (Integer), allocated_gc_ids (Array[UUID])</td><td valign="top">Records energy charged into storage, linking to original GC attributes.</td><td valign="top">Based on metered import. EnergyTag compliant.<sup>12</sup></td></tr><tr><td valign="top">Storage Discharge Record (SDR)</td><td valign="top">sdr_id (UUID), storage_unit_id (String), start_ts (Timestamp), end_ts (Timestamp), energy_out_wh (Integer)</td><td valign="top">Records energy discharged from storage.</td><td valign="top">Based on metered export. EnergyTag compliant.<sup>12</sup></td></tr><tr><td valign="top">Storage Time Allocation Record (STAR)</td><td valign="top">star_id (UUID), scr_id (UUID), sdr_id (UUID), allocated_gc_ids (Array[UUID]), round_trip_loss_wh (Integer)</td><td valign="top">Tradable commodity representing the verified time-shifting service, linking SCR to SDR and accounting for losses.</td><td valign="top">Novel instrument proposed by Clean Incentive. Tradeable until retired with GC.</td></tr><tr><td valign="top">Storage-Discharge GC (SD-GC)</td><td valign="top">sdgc_id (UUID), original_gc_id (UUID), star_id (UUID), start_ts (Timestamp), end_ts (Timestamp), energy_wh (Integer), source_attributes (JSON), delta_mer_kgco2e_mwh (Float, Optional)</td><td valign="top">Final, non-tradable certificate representing the time-shifted attribute. Used for claim substantiation. Timestamp reflects discharge time.</td><td valign="top">Aligned with EnergyTag SD-GC concept.<sup>12</sup> Inherits source attributes from original GC. Immutable audit trail via star_id.</td></tr></tbody></table>

This structured data architecture provides the necessary granularity and linkage to ensure the integrity and auditability of the STAR system.

## Seamless Integration with Legacy REC Systems and Modern GC Platforms

For STARs to be effective, the Granular Registry must seamlessly interact with both the established REC infrastructure and emerging GC platforms.<sup>129</sup> GCs, the prerequisite for STARs, often originate from underlying RECs tracked in systems like M-RETS, PJM GATS, WREGIS, or European GO registries (AIB/EECS).<sup>58</sup> The Granular Registry is designed with interoperability in mind, supporting multiple integration pathways consistent with EnergyTag configurations <sup>12</sup>:

* **REC Reservation/Retirement and GC Linkage:** The primary method involves linking GCs to specific RECs that have been retired or reserved in a legacy registry. The GC stores the eac\_reference (e.g., REC serial number), and potentially a cryptographic hash (Hash-Link Proof) of the underlying REC data for enhanced auditability . This ensures the attributes are not claimed in both systems.
* **Dual-Registry Synchronization (EnergyTag Config 2):** For active GCs that might co-exist with active RECs before retirement, robust synchronization is crucial. The Granular Registry can utilize secure APIs and webhooks (e.g., using JSON API standards and JWS signatures) to communicate GC status changes (transfer, retirement) to the corresponding REC registry in real-time, preventing the same attribute from being sold or claimed in both systems.<sup>12</sup>
* **GCs from Cancelled RECs (EnergyTag Config 3):** The Granular Registry can monitor public cancellation data from REC registries and mint corresponding GCs in a locked (non-transferable) state, directly allocated to the beneficiary who retired the REC. This is suitable for direct matching claims.<sup>12</sup>

Compatibility with these established integration patterns ensures that STARs can leverage GCs originating from various sources and coexist within the broader, albeit fragmented, landscape of energy attribute tracking systems. This focus on interoperability is vital for minimizing market friction and maximizing the potential reach of STARs.

## The FIFO Allocation Engine and Storage Loss Accounting Protocol

Two core operational rules ensure the physical credibility of STARs: FIFO allocation and accurate loss accounting.

* **FIFO Engine:** The Granular Registry implements a "Reservoir Model" for each registered storage unit. This maintains an ordered queue (first-in, first-out) of SCRs representing the energy attributes charged into the battery. When an SDR is created upon discharge, the engine dequeues energy from the oldest available SCR(s) until the discharge amount (SDR energy\_out\_wh) is satisfied. This strict FIFO logic prevents arbitrary matching and ensures the temporal sequence of attributes reflects a plausible physical operation.<sup>12</sup> The engine generates auditable logs recording each SCR-SDR match.
* **Loss Accounting Protocol:** Energy storage incurs losses (RTE < 100%).<sup>46</sup> The STAR mechanism mandates accounting for these losses. When the FIFO engine links an SCR to an SDR, it calculates the energy lost based on the verified RTE of the storage unit. This loss (round\_trip\_loss\_wh) is recorded directly on the issued STAR. The energy quantity in the resulting SD-GC (energy\_wh) reflects the _discharged_ energy (energy\_out\_wh from the SDR), which is inherently less than the charged energy (energy\_in\_wh from the SCR). The methodology used to determine the RTE for the storage unit (e.g., nameplate efficiency adjusted for degradation, results from standardized tests, real-time calculations based on operational data) must be transparent and verifiable, aligning with EnergyTag principles.<sup>12</sup>

Together, the FIFO engine and loss accounting protocol ensure that each STAR represents a physically plausible time-shifting event, maintaining energy balance and preventing the creation of unsubstantiated attribute claims.

## Demonstrating Alignment with EnergyTag Standards

EnergyTag is rapidly emerging as the leading global standard for granular certificate schemes.<sup>1</sup> Ensuring STARs and the Granular Registry align with EnergyTag principles is crucial for interoperability and market acceptance. The STAR framework is designed to be fully compatible with and build upon the EnergyTag GC Scheme Standard V2 (March 2024) <sup>12</sup>:

* **GC Foundation:** STARs operate on GCs that meet EnergyTag definitions and requirements.
* **Storage Records:** The SCR, SDR, and SD-GC objects within the Granular Registry directly correspond to the storage-related records defined in EnergyTag Standard Chapter 1.6.<sup>12</sup>
* **Loss Accounting:** The requirement for explicit loss accounting aligns with EnergyTag Standard 1.6.4 and Annex 2.<sup>12</sup>
* **Attribute Allocation:** The FIFO method used by the Granular Registry is a specific, transparent implementation consistent with the principles for attribute allocation outlined in EnergyTag Standard 1.6.5 and potentially detailed further in Annex 3.<sup>12</sup>
* **SD-GC Attributes:** The information included in the SD-GC (discharge timestamp, link to original GC, link to storage event via STAR) aligns with EnergyTag requirements for Storage Discharge GCs.<sup>12</sup>
* **Compatibility:** The overall STAR process is designed to function within the broader EnergyTag ecosystem, including compatibility with the EnergyTag Matching Standard <sup>38</sup> and Use Case Guidelines.<sup>27</sup>

By adhering to EnergyTag standards where applicable and clearly documenting the STAR-specific additions, Clean Incentive ensures that its solution can integrate smoothly with other compliant systems and leverage the growing market infrastructure being built around granular certificates. Relevant EnergyTag diagrams illustrating storage flows can be found in the Appendix.<sup>12</sup>
